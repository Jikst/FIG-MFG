<!DOCTYPE html>
<html lang="en-US">
  <head>
  
    
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-T94X59P');</script>
    
  

  
    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-70206008-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  

  <title>
    Selecting and Modifying CSS Pseudo-Elements with JavaScript | Toma Nistor - San Diego Web Developer</title>

  <meta name="title" content="Selecting and Modifying CSS Pseudo-Elements with JavaScript | Toma Nistor - San Diego Web Developer">

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="referrer" content="no-referrer-when-downgrade">
  <meta name="generator" content="">
  <base href="https://tomanistor.com">

  
    <meta name="description" content="How to target, select, and manipulate CSS pseudo-elements with JavaScript.">
  

  
    <meta name="author" content="Toma Nistor">
  

  
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@TomaNistor">
    <meta name="twitter:creator" content="@TomaNistor">
  

  <meta property="og:title" content="Selecting and Modifying CSS Pseudo-Elements with JavaScript | Toma Nistor - San Diego Web Developer">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://tomanistor.com">

  
    <meta property="og:image" content="https://tomanistor.com/images/logo/Toma-Nistor-Logo-Banner-Dark.png">
  

  
    <meta name="og:description" content="How to target, select, and manipulate CSS pseudo-elements with JavaScript.">
  

  
    <link rel="icon" type="image/png" sizes="16x16" href="favicon.ico">
    <meta name="theme-color" content="#FFF">
  

  <link rel="canonical" href="https://tomanistor.com/blog/selecting-and-modifying-css-pseudo-elements-with-javascript/">

  

  <link rel="stylesheet" href="https://tomanistor.com/styles/main-ffca48cf.min.css" type="text/css">

  
    <style>nav{box-shadow:none;}</style>

  

  
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
    
  

  
    <script src="https://tomanistor.com/scripts/vendor/lazysizes.min.js" async></script>
  
</head>

  <body>
    
  
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T94X59P"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  




<nav class="row middle-xs center-xs">
  <div class="col-xs-6 col-sm-1 logo">
    <a href="https://tomanistor.com#"><img data-src="/images/logo/toma-nistor-logo.svg" class="lazyload" lazyload="on" alt="Toma Nistor - San Diego Web Developer"></a>
  </div>
    
      <div class="col-xs-3 col-sm-2">
        <h3><a href="https://tomanistor.com/#about">About</a></h3>
      </div>
    
      <div class="col-xs-3 col-sm-2">
        <h3><a href="https://tomanistor.com/#work">Work</a></h3>
      </div>
    
      <div class="col-xs-3 col-sm-2">
        <h3><a href="https://tomanistor.com/#blog">Blog</a></h3>
      </div>
    
      <div class="col-xs-3 col-sm-2">
        <h3><a href="https://tomanistor.com/#contact">Contact</a></h3>
      </div>
    
  <div class="col-xs-6 col-sm-1 nav-toggle">
      <a href="" class="nav-icon" onclick="return false">
        <img data-src="/images/icon-menu.png" class="lazyload" lazyload="on" alt="Open Menu">
        <img data-src="/images/icon-x.png" class="lazyload" lazyload="on" alt="Close Menu" style="display: none;">
      </a>
  </div>
</nav>

<section class="nav-full row middle-xs center-xs">
  <div class="col-xs-12">
    <div class="row middle-xs center-xs">
      
        <div class="col-xs-12"><h1><a href="https://tomanistor.com/#about">About</a></h1></div>
      
        <div class="col-xs-12"><h1><a href="https://tomanistor.com/#work">Work</a></h1></div>
      
        <div class="col-xs-12"><h1><a href="https://tomanistor.com/#blog">Blog</a></h1></div>
      
        <div class="col-xs-12"><h1><a href="https://tomanistor.com/#contact">Contact</a></h1></div>
      
    </div>
  </div>
</section>

    <main>

      <section class="container">
        <section class="content">
          <h1> Selecting and Modifying CSS Pseudo-Elements with JavaScript </h1>

          <div class="sub-header">
            January 12, 2019 Â· 3 minute read
          </div>

          <article class="entry-content">
            

<p><img src="https://tomanistor.com/images/blog/vaporwave-palm-trees.jpg" alt="Vaporwave palm tree art" /></p>

<p>Since they&rsquo;re not part of the DOM, CSS pseudo-elements can&rsquo;t be selected and edited with JavaScript the same way as traditional elements on a page. I ended up going a different route by selecting the regular elements, creating CSS rules for their pseudo elements, and injecting those them into the page.</p>

<h2 id="the-design">The Design</h2>

<p>One of my recent projects involved creating 10 sections that follow a similar layout. Each section was distinguished by a numbered tab that was incrementally offset to the right of the previous section&rsquo;s tab.</p>

<p>To create each section&rsquo;s tabs, I absolutely positioned a <code>::before</code> pseudo-element at the top of the section. One way to accomplish the design would have been to hardcode the text and numbers in each tab individually and do the same with positioning in the stylesheet. However, I wanted to generate these numbered tabs and their positions programmatically since they followed a reproducible pattern.</p>

<p><img src="https://tomanistor.com/images/blog/tabs.png" alt="Sketch of tabs" /></p>

<h2 id="the-problem">The Problem</h2>

<p>In the stylesheets, I added the base styles of each section and their pseudo-element tabs.</p>

<p>What I wanted to do with JavaScript was to run through a loop of all 10 tabs so I could add tab numbers to the <code>content</code> attribute and change their horizontal positions.</p>

<p>JavaScript allowed me to select my pseudo elements with the <code>getComputedStyle</code> method and retrieve specific values.</p>

<pre><code class="language-js">window.getComputedStyle(
	document.querySelector('section'), ':before'
).getPropertyValue('left')
</code></pre>

<p>However, I quickly came to find that it wasn&rsquo;t possible to target <em>and</em> manipulate pseudo-elements as they&rsquo;re not part of the DOM.</p>

<h2 id="the-solution">The Solution</h2>

<p>With a little help from some <a href="https://stackoverflow.com/questions/5041494/selecting-and-manipulating-css-pseudo-elements-such-as-before-and-after-usin">Stack</a> <a href="https://stackoverflow.com/questions/21032481/change-the-style-of-before-and-after-pseudo-elements">Overflow</a> threads, I learned that the best solution for my situation was to loop through each of my <code>section</code> elements, create CSS rules for each pseudo-element, and then insert the rules inside a <code>style</code> tag in the head of the site.</p>

<p>I started with an empty string called <code>cssRules</code>, and a number value of <code>7.5</code> which was used as the initial <code>left</code> position of the tabs. This number was also what each subsequent tab would be incremented by in the for loop. An empty variable, <code>newLeftPosition</code> was used to store the new, calculated <code>left</code> position of each tab in the index.</p>

<p>Within the for loop, the index of each element was used to multiply by <code>7.5</code> to give the element a <code>left</code> position. The index was also used to print the number of the tab by way of the pseudo-element&rsquo;s <code>content</code> property. Both of these properties were assigned to numbered classes that corresponded to each section (e.g. <code>.section-1</code>, <code>.section-2</code>, <code>.section-3</code>) and then added to the <code>cssRules</code> string.</p>

<pre><code class="language-js">;(function() {
  var cssRules = '',
      origLeftPosition = 7.5,
      newLeftPosition

  $('section').each(function(i) {
    newLeftPosition = origLeftPosition * (i + 1)
    cssRules += '.section-' + (i + 1) + &quot;::before{content:'Tab &quot; + (i + 1) + &quot;';left:&quot; + newLeftPosition + 'vw;}'
  })

  $('head').append('&lt;style&gt;' + cssRules + '&lt;/style&gt;')
})()
</code></pre>

<p>The <code>cssRules</code> string contained the rules for all <code>section::before</code> pseudo-elements. These were then appended inside of a <code>style</code> tag to the head of the page, which rendered like this:</p>

<pre><code class="language-html">&lt;style&gt;.section-1::before{content:'Tab 1';left:7.5vw;}.section-2::before{content:'Tab 2';left:15vw;}.section-3::before{content:'Tab 3';left:22.5vw;}.section-4::before{content:'Tab 4';left:30vw;}.section-5::before{content:'Tab 5';left:37.5vw;}.section-6::before{content:'Tab 6';left:45vw;}.section-7::before{content:'Tab 7';left:52.5vw;}.section-8::before{content:'Tab 8';left:60vw;}.section-9::before{content:'Tab 9';left:67.5vw;}.section-10::before{content:'Tab 10';left:75vw;}&lt;/style&gt;
</code></pre>

<p>It might have taken me a little longer to figure out how to generate this design element programmatically instead of just individually typing each pseudo-elements&rsquo;s different properties, but I&rsquo;m pleased with the outcome, the challenge this small hurdle posed, and the knowledge gained along the way.</p>

          </article>

          <div class="pagination">
            
              <a href="https://tomanistor.com/blog/how-to-change-most-recent-commit-message/">&laquo; How To Change Most Recent Commit Message</a>
            
            
          </div>
        </section>
        <br>
        <section class="disqus">
  <div id="disqus_thread"></div>
  <script type="text/javascript">
    (function() {
      
      
      if (window.location.hostname == "localhost")
        return;
      var disqus_shortname = 'tomanistor';
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <noscript>Please enable JavaScript to view comments powered by <a href="http://disqus.com/?ref_noscript">Disqus</a>.</noscript>
</section>

      </section>

    </main>
    <footer class="row middle-xs center-xs">

  

  
    <div class="col-xs-3 col-md-2"><a target="_blank" rel="noopener" href="https://github.com/tomanistor">GitHub</a></div>
  

  
    <div class="col-xs-3 col-md-2"><a target="_blank" rel="noopener" href="https://linkedin.com/in/tomanistor">LinkedIn</a></div>
  

  
    <div class="col-xs-3 col-md-2"><a target="_blank" rel="noopener" href="https://twitter.com/TomaNistor">Twitter</a></div>
  

  

</footer>

    


  
    <script src="https://tomanistor.com/scripts/highlight.pack.js"></script>
  
  <script>hljs.initHighlightingOnLoad();</script>



  <script src="https://tomanistor.com/scripts/main-c040f8f0.min.js" type="text/javascript"></script>


  </body>
</html>
